
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        #tableIng {
            width: 35%;
        }
        #tableMeas {
            width: 20%;
        }
        #tableUnit {
            width: 35%;
        }
        #tableAdd {
            width: 10%;
        }
    </style>
</head>
<body>
    <div class = "container">
        <div class = "form-group">
            <label for = "recipeName">Recipe Name: </label>
            <input type = "text" id = "recipeName">
        </div>
        <table id = "ingTable" class = "table">
            <thead>
                <tr>
                        
                        <th id = "tableIng">Ingredient</th>
                        <th id = "tableMeas">Amt.</th>
                        <th id = "tableUnit">Unit</th>
                        <th id = "tableAdd"></th>
                        </div>
                    </div>
                </tr>
            </thead>
            <tbody id = "ingredients">
                <div class = "form-group row">
                    <td><!--where to enter the name of the ingredient-->
                        <input type = "text" class = "form-control ingredient" id = "ing1">
                    </td>
                    <td><!--enter the amount as a number-->
                        <input type = "number" class = "form-control measure" id = "meas1">
                    </td>
                    <td><!--enter the unit of measure-->
                        <select class = "form-control unit" id = "unit1">
                            <option>-----</option>
                            <option>each</option>
                            <option>tsp</option>
                            <option>Tbsp</option>
                            <option>cup(s)</option>
                            <option>qt</option>
                            <option>gal</option>
                            <option>oz</option>
                            <option>lbs</option>
                            <option>ml</option>
                            <option>L</option>
                            <option>mg</option>
                            <option>g</option>
                            <option>Kg</option>
                        </select>
                    </td>
                    <td><!--button to add another ingredient-->
                        <button class = "addIngredient" id = "addIng1"><strong>+</strong></button>
                    </td>
                </div>
            </tbody>
        </table>
        <div class = "form-group">
            <label for="directions">Directions:</label>
            <textarea class = "form-control" id = "directions" rows = "5"></textarea>
        </div>
        <button class = "btn btn-primary" id = "addRecipe">Done</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type = "text/javascript">
        //DOM selector variables
        var $ingredients = $("#ingredients"),
            $recipeName = $("#recipeName");
            $directions = $("#directions"),
            $addRecipe = $("#addRecipe");
        //ingredient counter
        var currentIngredient = 1;
        //array of recipe objects
        var myRecipes = JSON.parse(localStorage.getItem("recipes")) || [];
        //event listener to add an ingredient
        $(document).on("click", ".addIngredient", function(event) {
            event.preventDefault();
            //hide the current button.
            $("#addIng" + currentIngredient).css({"visibility": "hidden"});
            //Increment the ingredient counter
            currentIngredient++;
            //append a new row to the ingredients table
            $ingredients.append ( "<tr>" +
                "<div class = 'form-group row'>" +
                    "<td>" +
                        "<input type = 'text' class = 'form-control ingredient' id = 'ing" + currentIngredient + "'>" +
                    "</td>" +
                    "<td>" +
                        "<input type = 'number' class = 'form-control measure' id = 'meas"+ currentIngredient +"'>" +
                    "</td>" +
                    "<td>" +
                        "<select class = 'form-control unit' id = 'unit" + currentIngredient + "'>" +
                            "<option>-----</option>" +
                            "<option>each</option" +
                            "<option>tsp</option>" +
                            "<option>Tbsp</option>" +
                            "<option>cup(s)</option>" +
                            "<option>qt</option>" +
                            "<option>gal</option>" +
                            "<option>oz</option>" +
                            "<option>lbs</option>" +
                            "<option>ml</option>" +
                            "<option>L</option>" +
                            "<option>mg</option>" +
                            "<option>g</option>" +
                            "<option>Kg</option>" +
                        "</select>" +
                    "</td>" +
                    "<td>" + 
                        "<button class = 'addIngredient' id = 'addIng" + currentIngredient + "'><strong>+</strong></button>" +
                    "</td>" +
                "</div></tr>"
            );       
        });
        //event listener to submit a recipe
        $addRecipe.click(function(event){
            //pull the values from the form as variables
            var name = $recipeName.val().trim();
            var directions = $directions.val().trim();
            var ingredients = [],
                measures = [],
                units = [];
            for( var i = 1; i<= currentIngredient; i++) {
                ingredients.push($("#ing" + i).val().trim());
                measures.push($("#meas" + i).val());
                units.push($("#unit" + i).val());
            }
            //create a new object from the values
            var recipe = {
                name: name,
                ingredients: ingredients,
                measures: measures,
                units: units,
                directions: directions
            }
            console.log(recipe);
            //add our new recipe to myRecipes
            myRecipes.push(recipe);
            //update the local storage (eventually the database)
            localStorage.clear();
            localStorage.setItem("recipes", JSON.stringify(myRecipes));
            //reset the form
            currentIngredient = 1;
            $directions.val("");
            $ingredients.html ( "<tr>" +
                "<div class = 'form-group row'>" +
                    "<td>" +
                        "<input type = 'text' class = 'form-control ingredient' id = 'ing" + currentIngredient + "'>" +
                    "</td>" +
                    "<td>" +
                        "<input type = 'number' class = 'form-control measure' id = 'meas"+ currentIngredient +"'>" +
                    "</td>" +
                    "<td>" +
                        "<select class = 'form-control unit' id = 'unit" + currentIngredient + "'>" +
                            "<option>-----</option>" +
                            "<option>each</option" +
                            "<option>tsp</option>" +
                            "<option>Tbsp</option>" +
                            "<option>cup(s)</option>" +
                            "<option>qt</option>" +
                            "<option>gal</option>" +
                            "<option>oz</option>" +
                            "<option>lbs</option>" +
                            "<option>ml</option>" +
                            "<option>L</option>" +
                            "<option>mg</option>" +
                            "<option>g</option>" +
                            "<option>Kg</option>" +
                        "</select>" +
                    "</td>" +
                    "<td>" + 
                        "<button class = 'addIngredient' id = 'addIng" + currentIngredient + "'><strong>+</strong></button>" +
                    "</td>" +
                "</div></tr>"
            );       
        });

    </script>
</body>
</html>